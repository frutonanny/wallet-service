// Package v1 provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/deepmap/oapi-codegen version v1.11.0 DO NOT EDIT.
package v1

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"
	"time"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/labstack/echo/v4"
)

// Defines values for GetTransactionsRequestDirection.
const (
	Asc  GetTransactionsRequestDirection = "asc"
	Desc GetTransactionsRequestDirection = "desc"
)

// Defines values for GetTransactionsRequestSortBy.
const (
	Amount GetTransactionsRequestSortBy = "amount"
	Date   GetTransactionsRequestSortBy = "date"
)

// AddData defines model for AddData.
type AddData struct {
	// Текущий баланс пользователя в копейках с учетом пополнения.
	Balance int64 `json:"balance"`
}

// AddRequest defines model for AddRequest.
type AddRequest struct {
	// Сумма в копейках.
	Cash int64 `json:"cash"`

	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// AddResponse defines model for AddResponse.
type AddResponse struct {
	Data  *AddData `json:"data,omitempty"`
	Error *Error   `json:"error,omitempty"`
}

// CancelData defines model for CancelData.
type CancelData struct {
	// Текущий баланс пользователя в копейках с учетом разрезервирования средств.
	Balance int64 `json:"balance"`
}

// CancelRequest defines model for CancelRequest.
type CancelRequest struct {
	// Идентификатор заказа
	OrderID int64 `json:"orderID"`

	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// CancelResponse defines model for CancelResponse.
type CancelResponse struct {
	Data  *CancelData `json:"data,omitempty"`
	Error *Error      `json:"error,omitempty"`
}

// Error defines model for Error.
type Error struct {
	Code    string `json:"code"`
	Message string `json:"message"`
}

// GetBalanceData defines model for GetBalanceData.
type GetBalanceData struct {
	// Текущий баланс пользователя в копейках.
	Balance int64 `json:"balance"`
}

// GetBalanceRequest defines model for GetBalanceRequest.
type GetBalanceRequest struct {
	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// GetBalanceResponse defines model for GetBalanceResponse.
type GetBalanceResponse struct {
	Data  *GetBalanceData `json:"data,omitempty"`
	Error *Error          `json:"error,omitempty"`
}

// GetReportData defines model for GetReportData.
type GetReportData struct {
	// Ссылка на CSV файл.
	Reference string `json:"reference"`
}

// GetReportRequest defines model for GetReportRequest.
type GetReportRequest struct {
	// Время в формате 'yyyy-mm'.
	Date string `json:"date"`
}

// GetReportResponse defines model for GetReportResponse.
type GetReportResponse struct {
	Data  *GetReportData `json:"data,omitempty"`
	Error *Error         `json:"error,omitempty"`
}

// GetTransactionsByTimeData defines model for GetTransactionsByTimeData.
type GetTransactionsByTimeData struct {
	// Список транзакций пользователя userID.
	Transactions []Transaction `json:"transactions"`
}

// GetTransactionsByTimeRequest defines model for GetTransactionsByTimeRequest.
type GetTransactionsByTimeRequest struct {
	// Временная точка в формате time.RFC3339, до которой происходит поиск транзакций.
	End time.Time `json:"end"`

	// Временная точка в формате time.RFC3339, от которой начинается поиск транзакций.
	Start time.Time `json:"start"`

	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// GetTransactionsByTimeResponse defines model for GetTransactionsByTimeResponse.
type GetTransactionsByTimeResponse struct {
	Data  *GetTransactionsByTimeData `json:"data,omitempty"`
	Error *Error                     `json:"error,omitempty"`
}

// GetTransactionsData defines model for GetTransactionsData.
type GetTransactionsData struct {
	// Отсортированный список транзакций пользователя userID.
	Transactions []Transaction `json:"transactions"`
}

// GetTransactionsRequest defines model for GetTransactionsRequest.
type GetTransactionsRequest struct {
	// Направление поиска (по возрастанию/убыванию).
	Direction GetTransactionsRequestDirection `json:"direction"`

	// Количество записей.
	Limit int64 `json:"limit"`

	// Смещение по отсортированным записям.
	Offset int64 `json:"offset"`

	// Поле, по которому происходит сортировка (дате/сумме).
	SortBy GetTransactionsRequestSortBy `json:"sortBy"`

	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// Направление поиска (по возрастанию/убыванию).
type GetTransactionsRequestDirection string

// Поле, по которому происходит сортировка (дате/сумме).
type GetTransactionsRequestSortBy string

// GetTransactionsResponse defines model for GetTransactionsResponse.
type GetTransactionsResponse struct {
	Data  *GetTransactionsData `json:"data,omitempty"`
	Error *Error               `json:"error,omitempty"`
}

// ReserveData defines model for ReserveData.
type ReserveData struct {
	// Текущий баланс пользователя в копейках с учетом резервирования средств.
	Balance int64 `json:"balance"`
}

// ReserveRequest defines model for ReserveRequest.
type ReserveRequest struct {
	// Идентификатор заказа
	OrderID int64 `json:"orderID"`

	// Стоимость заказа в копейках.
	Price int64 `json:"price"`

	// Идентификатор услуги.
	ServiceID int64 `json:"serviceID"`

	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// ReserveResponse defines model for ReserveResponse.
type ReserveResponse struct {
	Data  *ReserveData `json:"data,omitempty"`
	Error *Error       `json:"error,omitempty"`
}

// Transaction defines model for Transaction.
type Transaction struct {
	// todo
	Amount int64 `json:"amount"`

	// todo
	CreatedAt time.Time `json:"createdAt"`

	// todo
	Description string `json:"description"`
}

// WriteOffData defines model for WriteOffData.
type WriteOffData struct {
	// Текущий баланс пользователя в копейках с учетом списания средств.
	Balance int64 `json:"balance"`
}

// WriteOffRequest defines model for WriteOffRequest.
type WriteOffRequest struct {
	// Идентификатор заказа
	OrderID int64 `json:"orderID"`

	// Стоимость заказа в копейках.
	Price int64 `json:"price"`

	// Идентификатор услуги.
	ServiceID int64 `json:"serviceID"`

	// Идентификатор пользователя.
	UserID int64 `json:"userID"`
}

// WriteOffResponse defines model for WriteOffResponse.
type WriteOffResponse struct {
	Data  *WriteOffData `json:"data,omitempty"`
	Error *Error        `json:"error,omitempty"`
}

// PostAddJSONBody defines parameters for PostAdd.
type PostAddJSONBody = AddRequest

// PostCancelJSONBody defines parameters for PostCancel.
type PostCancelJSONBody = CancelRequest

// PostGetBalanceJSONBody defines parameters for PostGetBalance.
type PostGetBalanceJSONBody = GetBalanceRequest

// PostGetReportJSONBody defines parameters for PostGetReport.
type PostGetReportJSONBody = GetReportRequest

// PostGetTransactionsJSONBody defines parameters for PostGetTransactions.
type PostGetTransactionsJSONBody = GetTransactionsRequest

// PostGetTransactionsByTimeJSONBody defines parameters for PostGetTransactionsByTime.
type PostGetTransactionsByTimeJSONBody = GetTransactionsByTimeRequest

// PostReserveJSONBody defines parameters for PostReserve.
type PostReserveJSONBody = ReserveRequest

// PostWriteOffJSONBody defines parameters for PostWriteOff.
type PostWriteOffJSONBody = WriteOffRequest

// PostAddJSONRequestBody defines body for PostAdd for application/json ContentType.
type PostAddJSONRequestBody = PostAddJSONBody

// PostCancelJSONRequestBody defines body for PostCancel for application/json ContentType.
type PostCancelJSONRequestBody = PostCancelJSONBody

// PostGetBalanceJSONRequestBody defines body for PostGetBalance for application/json ContentType.
type PostGetBalanceJSONRequestBody = PostGetBalanceJSONBody

// PostGetReportJSONRequestBody defines body for PostGetReport for application/json ContentType.
type PostGetReportJSONRequestBody = PostGetReportJSONBody

// PostGetTransactionsJSONRequestBody defines body for PostGetTransactions for application/json ContentType.
type PostGetTransactionsJSONRequestBody = PostGetTransactionsJSONBody

// PostGetTransactionsByTimeJSONRequestBody defines body for PostGetTransactionsByTime for application/json ContentType.
type PostGetTransactionsByTimeJSONRequestBody = PostGetTransactionsByTimeJSONBody

// PostReserveJSONRequestBody defines body for PostReserve for application/json ContentType.
type PostReserveJSONRequestBody = PostReserveJSONBody

// PostWriteOffJSONRequestBody defines body for PostWriteOff for application/json ContentType.
type PostWriteOffJSONRequestBody = PostWriteOffJSONBody

// ServerInterface represents all server handlers.
type ServerInterface interface {

	// (POST /add)
	PostAdd(ctx echo.Context) error

	// (POST /cancel)
	PostCancel(ctx echo.Context) error

	// (POST /getBalance)
	PostGetBalance(ctx echo.Context) error

	// (POST /getReport)
	PostGetReport(ctx echo.Context) error

	// (POST /getTransactions)
	PostGetTransactions(ctx echo.Context) error

	// (POST /getTransactionsByTime)
	PostGetTransactionsByTime(ctx echo.Context) error

	// (POST /reserve)
	PostReserve(ctx echo.Context) error

	// (POST /writeOff)
	PostWriteOff(ctx echo.Context) error
}

// ServerInterfaceWrapper converts echo contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler ServerInterface
}

// PostAdd converts echo context to params.
func (w *ServerInterfaceWrapper) PostAdd(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostAdd(ctx)
	return err
}

// PostCancel converts echo context to params.
func (w *ServerInterfaceWrapper) PostCancel(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostCancel(ctx)
	return err
}

// PostGetBalance converts echo context to params.
func (w *ServerInterfaceWrapper) PostGetBalance(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostGetBalance(ctx)
	return err
}

// PostGetReport converts echo context to params.
func (w *ServerInterfaceWrapper) PostGetReport(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostGetReport(ctx)
	return err
}

// PostGetTransactions converts echo context to params.
func (w *ServerInterfaceWrapper) PostGetTransactions(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostGetTransactions(ctx)
	return err
}

// PostGetTransactionsByTime converts echo context to params.
func (w *ServerInterfaceWrapper) PostGetTransactionsByTime(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostGetTransactionsByTime(ctx)
	return err
}

// PostReserve converts echo context to params.
func (w *ServerInterfaceWrapper) PostReserve(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostReserve(ctx)
	return err
}

// PostWriteOff converts echo context to params.
func (w *ServerInterfaceWrapper) PostWriteOff(ctx echo.Context) error {
	var err error

	// Invoke the callback with all the unmarshalled arguments
	err = w.Handler.PostWriteOff(ctx)
	return err
}

// This is a simple interface which specifies echo.Route addition functions which
// are present on both echo.Echo and echo.Group, since we want to allow using
// either of them for path registration
type EchoRouter interface {
	CONNECT(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	DELETE(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	GET(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	HEAD(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	OPTIONS(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	PATCH(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	POST(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	PUT(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
	TRACE(path string, h echo.HandlerFunc, m ...echo.MiddlewareFunc) *echo.Route
}

// RegisterHandlers adds each server route to the EchoRouter.
func RegisterHandlers(router EchoRouter, si ServerInterface) {
	RegisterHandlersWithBaseURL(router, si, "")
}

// Registers handlers, and prepends BaseURL to the paths, so that the paths
// can be served under a prefix.
func RegisterHandlersWithBaseURL(router EchoRouter, si ServerInterface, baseURL string) {

	wrapper := ServerInterfaceWrapper{
		Handler: si,
	}

	router.POST(baseURL+"/add", wrapper.PostAdd)
	router.POST(baseURL+"/cancel", wrapper.PostCancel)
	router.POST(baseURL+"/getBalance", wrapper.PostGetBalance)
	router.POST(baseURL+"/getReport", wrapper.PostGetReport)
	router.POST(baseURL+"/getTransactions", wrapper.PostGetTransactions)
	router.POST(baseURL+"/getTransactionsByTime", wrapper.PostGetTransactionsByTime)
	router.POST(baseURL+"/reserve", wrapper.PostReserve)
	router.POST(baseURL+"/writeOff", wrapper.PostWriteOff)

}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"9KIqAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %s", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %s", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %s", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	var res = make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	var resolvePath = PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		var pathToFile = url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
